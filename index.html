<!DOCTYPE html>
<html lang="ja">

<head>
  <!-- メタ情報 -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="日本全国の保育園、幼稚園、小学校を検索・表示できるインタラクティブなマップアプリケーション。ピン検索で指定した半径内の施設を素早く発見できます。">
  <meta name="keywords" content="施設マップ, 保育園, 幼稚園, 小学校, 検索, インタラクティブマップ, 日本, 地図">
  <meta name="author" content="Tisk">
  <meta name="theme-color" content="#4285f4">

  <!-- OGP (Open Graph Protocol) -->
  <meta property="og:title" content="施設マップ - 保育園・幼稚園・小学校検索">
  <meta property="og:description" content="日本全国の保育園、幼稚園、小学校を検索・表示できるインタラクティブなマップアプリケーション。ピン検索で指定した半径内の施設を素早く発見できます。">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://systemcmd0122.github.io/facilities-map/public/og-image.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:url" content="https://systemcmd0122.github.io/facilities-map/">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="施設マップ - 保育園・幼稚園・小学校検索">
  <meta name="twitter:description" content="日本全国の保育園、幼稚園、小学校を検索・表示できるインタラクティブなマップアプリケーション。">
  <meta name="twitter:image" content="https://systemcmd0122.github.io/facilities-map/public/og-image.png">

  <!-- その他のメタタグ -->
  <meta name="robots" content="index, follow">
  <meta name="language" content="ja">
  <meta name="revisit-after" content="7 days">

  <title>施設マップ - 保育園・幼稚園・小学校を検索できるインタラクティブマップ</title>

  <!-- ファビコン -->
  <link rel="icon" type="image/png" href="./public/icon.png">
  <link rel="apple-touch-icon" href="./public/icon.png">

  <!-- リンク関連 -->
  <link rel="canonical" href="https://systemcmd0122.github.io/facilities-map/">

  <!-- スタイルシート -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="./styles.css">
</head>

<body>
  <!-- 構造化データ (JSON-LD) -->
  <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "施設マップ",
        "description": "日本全国の保育園、幼稚園、小学校を検索・表示できるインタラクティブなマップアプリケーション",
        "url": "https://facilities-map.vercel.app",
        "applicationCategory": "UtilitiesApplication",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "JPY"
        },
        "creator": {
            "@type": "Person",
            "name": "systemcmd0122"
        },
        "image": "./public/icon.png",
        "operatingSystem": "Web",
        "browserRequirements": "Requires JavaScript enabled"
    }
    </script>

  <div class="container">
    <div class="sidebar">
      <header class="app-header">
        <div class="tab-group">
          <button class="tab active" data-tab="search">検索</button>
          <button class="tab" data-tab="history">履歴</button>
        </div>
      </header>

      <div id="search-tab" class="tab-content active">
        <div class="section">
          <div class="section-title">施設検索</div>
          <div class="control-group">
            <label>検索</label>
            <input type="text" id="name-search-input" placeholder="施設名や住所、地名を入力...">
          </div>
          <div class="control-group">
            <label>施設種類</label>
            <select id="category-select">
              <option value="">すべて</option>
              <option value="保育園">保育園</option>
              <option value="幼稚園">幼稚園</option>
              <option value="小学校">小学校</option>
              <option value="その他">その他</option>
            </select>
          </div>
          <div class="control-group">
            <label>都道府県</label>
            <select id="prefecture-select">
              <option value="">すべて</option>
            </select>
          </div>
        </div>

        <div class="section">
          <div class="section-title">ピン検索</div>
          <div class="control-group">
            <label>半径 (km) - リアルタイム反映</label>
            <input type="range" id="radius-input" value="5" min="1" max="50" style="width: 100%; cursor: pointer;">
            <div style="text-align: center; margin-top: 4px; font-weight: 700; color: #2196F3;">
              <span id="radius-display">5</span> km
            </div>
          </div>
          <div class="button-group">
            <button class="btn btn-primary" id="pin-btn">ピンを指す</button>
            <button class="btn btn-secondary" id="clear-pin-btn">クリア</button>
          </div>
          <div id="pin-info"></div>
        </div>

        <div class="section">
          <div class="section-title">検索結果を保存</div>
          <div class="button-group">
            <button class="btn btn-success" id="save-btn" style="flex: 1;">この検索を保存</button>
          </div>
          <div class="stats" style="display: none;" id="save-stats">
            <p>保存完了</p>
            <p>保存データ: <strong id="save-count-search">0</strong> 件</p>
          </div>
        </div>

        <div class="section">
          <div class="section-title">検索結果</div>
          <div style="font-size: 13px; color: #2196F3; font-weight: 700; margin-bottom: 12px;" id="result-count"></div>
          <ul class="facility-list" id="facility-list"></ul>
        </div>
      </div>

      <div id="history-tab" class="tab-content">
        <div class="section">
          <div class="section-title">統計情報</div>
          <div class="stats">
            <p>保存データ: <strong id="save-count">0</strong> 件</p>
            <p>使用容量: <strong id="data-size">0 KB</strong></p>
          </div>
        </div>

        <div class="section">
          <div class="section-title">データ管理</div>
          <div class="button-group">
            <button class="btn btn-primary" id="export-btn" style="flex: 1;">ファイルに保存</button>
            <button class="btn btn-primary" id="import-btn" style="flex: 1;">ファイルから読込</button>
          </div>
          <input type="file" id="import-file" class="hidden-file-input" accept=".json">
          <div class="button-group">
            <button class="btn btn-danger" id="clear-db-btn" style="flex: 1;">すべて削除</button>
          </div>
        </div>

        <div class="section">
          <div class="section-title">検索フィルター</div>
          <div class="control-group">
            <label>検索</label>
            <input type="text" id="history-search-box" class="search-box" placeholder="検索キーワードを入力...">
          </div>
          <div class="sort-options">
            <button class="sort-btn active" data-sort="newest">新しい順</button>
            <button class="sort-btn" data-sort="oldest">古い順</button>
            <button class="sort-btn" data-sort="radius-asc">半径が小さい順</button>
            <button class="sort-btn" data-sort="radius-desc">半径が大きい順</button>
            <button class="sort-btn" data-sort="count-asc">件数が少ない順</button>
            <button class="sort-btn" data-sort="count-desc">件数が多い順</button>
          </div>
        </div>

        <div class="section">
          <div class="section-title">保存済み検索一覧</div>
          <div id="saved-items"></div>
        </div>
      </div>
    </div>
    <div id="map">
      <div class="legend">
        <div class="legend-item">
          <div class="legend-color" style="background: #2196F3;"></div>
          <span>保育園</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #4CAF50;"></div>
          <span>幼稚園</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #FF9800;"></div>
          <span>小学校</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #9E9E9E;"></div>
          <span>その他</span>
        </div>
      </div>
    </div>
  </div>

  <!-- 名前編集モーダル -->
  <div id="edit-name-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">検索名を編集</div>
      <div class="modal-body">
        <input type="text" id="edit-name-input" class="modal-input" placeholder="検索名を入力してください">
      </div>
      <div class="modal-buttons">
        <button class="modal-btn modal-btn-cancel" id="modal-cancel-btn">キャンセル</button>
        <button class="modal-btn modal-btn-confirm" id="modal-confirm-btn">更新</button>
      </div>
    </div>
  </div>

  <!-- メモ入力モーダル -->
  <div id="memo-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">メモを追加</div>
      <div class="modal-body">
        <p style="font-size: 12px; color: #5f6368; margin-bottom: 12px;" id="memo-facility-name"></p>
        <textarea id="memo-input" class="modal-input" placeholder="メモを入力してください"
          style="min-height: 100px; resize: none;"></textarea>
      </div>
      <div class="modal-buttons">
        <button class="modal-btn modal-btn-cancel" id="memo-cancel-btn">キャンセル</button>
        <button class="modal-btn modal-btn-confirm" id="memo-save-btn">保存</button>
      </div>
    </div>
  </div>

  <script src="./app.js"></script>
</body>

</html>