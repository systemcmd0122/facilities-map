# 施設マップ

日本全国の保育園、幼稚園、小学校などの教育施設をマップ上で検索・表示できるモダンで使いやすいWebアプリケーション。Googleライクなデザインで、直感的にピン検索により指定した半径内の施設を素早く発見できます。

## 特徴

- **Googleライクなモダンデザイン**: シンプルで洗練されたユーザーインターフェース
- **インタラクティブなマップ**: Leaflet.jsを使用した高機能マップ表示
- **ピン検索機能**: マップ上にピンを指して、半径1～50km以内の施設を検索
- **複数フィルター**: 都道府県と施設種類（保育園・幼稚園・小学校）で絞り込み
- **正確な距離計算**: Haversine公式を使用した高精度距離計算
- **検索履歴管理**: IndexedDBで検索結果をローカルに保存・管理
- **ファイル出入力**: 検索履歴をJSONファイルでエクスポート・インポート
- **名前付き履歴**: 各検索に任意の名前を付けて管理可能
- **複数フィルター検索**: 検索キーワード、ソート機能で履歴を効率的に管理
- **複数都道府県対応**: 茨城、群馬、山梨、新潟、長野、栃木、富山の7都道府県に対応

## 主な機能説明

### 施設検索タブ
- **都道府県選択**: 7つの都道府県から選択
- **施設種類フィルター**: 保育園、幼稚園、小学校の中から選択
- **名前検索**: 施設名でのテキスト検索
- **ピン検索**: マップ上の任意の地点から半径指定での検索

### 履歴タブ
- **検索履歴表示**: 保存した検索の詳細情報（座標、半径、件数）を表示
- **履歴の名前編集**: クリックして履歴に名前を付ける
- **多機能フィルター**: キーワード検索で履歴を絞り込み
- **6種類のソート**: 新しい順、古い順、半径が小さい順など複数の並べ方

### データ管理
- **ファイル保存**: 検索履歴をJSON形式でダウンロード
- **ファイル読込**: 保存したJSONファイルをアップロード
- **データ統計**: 保存データ件数と使用容量をリアルタイム表示

## 使い方

### 基本的な検索
1. ブラウザで `index.html` を開く
2. マップ上に各地域の施設が色分けされて表示されます
3. **都道府県**と**施設種類**を選択して絞り込み
4. 施設名を入力して検索

### ピン検索
1. **「ピンを指す」** ボタンをクリック
2. マップ上の検索したい地点をクリック
3. 半径を1～50kmの間で調整
4. リアルタイムで検索結果が更新されます
5. 結果一覧から施設を選択してGoogle Mapsで確認

### 検索の保存
1. ピン検索後、**「この検索を保存」** ボタンをクリック
2. 名前を入力（デフォルトは日時）
3. 「履歴」タブで保存した検索を管理

### 履歴の管理
1. **「履歴」** タブを開く
2. 履歴の名前をクリックして編集可能
3. **「この検索を読み込む」** で検索を復元
4. **「新しい順」などのボタン** で並べ替え
5. **「ファイルに保存」** でバックアップ作成

## ファイル構成

```
facilities-map/
├── index.html                          # メインアプリケーション
├── package.json                        # プロジェクト設定
├── README.md                           # このファイル
├── facilities_data/                    # 施設データ
│   ├── 茨城_facilities.json
│   ├── 茨城_facilities.csv
│   ├── 群馬_facilities.json
│   ├── 群馬_facilities.csv
│   ├── 山梨_facilities.json
│   ├── 山梨_facilities.csv
│   ├── 新潟_facilities.json
│   ├── 新潟_facilities.csv
│   ├── 長野_facilities.json
│   ├── 長野_facilities.csv
│   ├── 栃木_facilities.json
│   ├── 栃木_facilities.csv
│   ├── 富山_facilities.json
│   └── 富山_facilities.csv
└── public/
    └── icon.png                        # アプリケーションアイコン
```

## 技術スタック

### フロントエンド
- **HTML5**: セマンティックマークアップ
- **CSS3**: モダンで洗練なスタイリング
- **Vanilla JavaScript (ES6+)**: 依存関係なしの軽量実装

### マップ・GIS
- **Leaflet.js v1.9.4**: インタラクティブマップの描画
- **OpenStreetMap**: フリーのタイルプロバイダー
- **Haversine公式**: 地球上の2点間の距離計算

### データ管理
- **IndexedDB**: ブラウザ内のローカルストレージ
- **JSON/CSV**: 施設データ形式

### UI/UX
- **Google Fonts (Noto Sans JP)**: 日本語対応フォント
- **CSS Flexbox/Grid**: レスポンシブデザイン
- **モーダルダイアログ**: ユーザーフレンドリーな名前編集

## 必要環境

- **ブラウザ**: Chrome, Firefox, Safari, Edge等の最新版
- **JavaScript**: ES6以上対応（2015年以降のブラウザ）
- **インターネット接続**: マップタイルとフォントの読み込み
- **ストレージ**: IndexedDB対応ブラウザ

## インストール・起動

```bash
# クローン
git clone https://github.com/systemcmd0122/facilities-map.git
cd facilities-map

# ローカルサーバーで起動 (Python)
python -m http.server 8000

# ブラウザでアクセス
# http://localhost:8000/
```

## API・データソース

- 施設データ: JSON/CSV形式（各都道府県別）
- マップ: OpenStreetMap via Leaflet.js
- ジオコーディング: 緯度経度データを直接使用

## ライセンス

MIT

## 作成者

Tisk